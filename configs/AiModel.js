const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Delhi, India, for 3 day and 2 Night for Just Me with a Cheap budget with a Flight details, Flight Price and Booking URL, Hotels options list with Hotel names, Hotel address, Price, Hotel image url, geo coordinates, rating, descriptions and places to visit nearby with Place name, Place Details, Place Image URL, Geo Coordinates, Ticket pricing, Time to travel each of the location for 3 day and 2 night with each day plan with best time to visit in JSON format.     flight -> (a) details -> 1. airline 2. flightNumber 3. departureAirport 4. arrivalAirport, 5. departureDate 6. departureTime 7. arrivalDate 8. arrivalTime  (b) price (c) bookingUrl     hotel -> 1. name 2. address 3. price 4. imageUrl 5. geoCoordinates -> (a) latitude (b) longitude 6. rating 7. description     dayPlan -> 1. day 2. schedule -> (a) time (b) activity (c) location (d) details (e) imageUrl (f) geoCoordinates -> (i) latitude (ii) longitude (g) estimatePricing      The JSON should be in this particular format and there should only be JSON in response nothing else (No Notes at the end) and in the pricing the amount and currency should be a common string.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "flight": {\n    "details": {\n      "airline": "IndiGo",\n      "flightNumber": "6E2345",\n      "departureAirport": "New Delhi International Airport (DEL)",\n      "arrivalAirport": "Your Departure Airport",\n      "departureDate": "2023-12-15",\n      "departureTime": "08:00",\n      "arrivalDate": "2023-12-15",\n      "arrivalTime": "10:00"\n    },\n    "price": "$200",\n    "bookingUrl": "https://www.goindigo.in/"\n  },\n  "hotel": [\n    {\n      "name": "The Backpackers Hostel",\n      "address": "12, Hanuman Road, New Delhi, Delhi 110001",\n      "price": "$15",\n      "imageUrl": "https://images.trvl-media.com/hotels/1000000/900000/898000/897788/897788_140.jpg",\n      "geoCoordinates": {\n        "latitude": 28.6328,\n        "longitude": 77.2182\n      },\n      "rating": 4.5,\n      "description": "A budget-friendly hostel in a central location, perfect for solo travelers and backpackers."\n    },\n    {\n      "name": "Zostel Delhi",\n      "address": "16B, Shahjahan Road, New Delhi, Delhi 110011",\n      "price": "$20",\n      "imageUrl": "https://www.zostel.com/images/hostels/delhi/1000x500/zostel-delhi-hostel-exterior-view.jpg",\n      "geoCoordinates": {\n        "latitude": 28.6294,\n        "longitude": 77.2147\n      },\n      "rating": 4,\n      "description": "A trendy hostel with a rooftop terrace and social spaces, ideal for meeting other travelers."\n    },\n    {\n      "name": "The Attic Hostel",\n      "address": "15, DDA Market, Hauz Khas, New Delhi, Delhi 110016",\n      "price": "$18",\n      "imageUrl": "https://www.hostelworld.com/hostelImages/73930/73930_11_0.jpg",\n      "geoCoordinates": {\n        "latitude": 28.5675,\n        "longitude": 77.1994\n      },\n      "rating": 4.2,\n      "description": "A cozy hostel in the vibrant Hauz Khas area, offering a mix of private and shared rooms."\n    }\n  ],\n  "dayPlan": [\n    {\n      "day": 1,\n      "schedule": [\n        {\n          "time": "09:00",\n          "activity": "Explore Old Delhi",\n          "location": "Chandni Chowk",\n          "details": "Wander through the bustling Chandni Chowk market, visit the Jama Masjid, and enjoy street food.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Chandni_Chowk,_Delhi.jpg/1280px-Chandni_Chowk,_Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6524,\n            "longitude": 77.2317\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "13:00",\n          "activity": "Lunch at Paranthe Wali Gali",\n          "location": "Paranthe Wali Gali",\n          "details": "Indulge in delicious parathas (stuffed flatbreads) at the famous Paranthe Wali Gali.",\n          "imageUrl": "https://www.holidify.com/images/cmsuploads/2021/01/Paranthe-Wali-Gali-Chandni-Chowk.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6529,\n            "longitude": 77.2334\n          },\n          "estimatePricing": "$3"\n        },\n        {\n          "time": "15:00",\n          "activity": "Visit the Red Fort",\n          "location": "Red Fort",\n          "details": "Explore the historical Red Fort, a UNESCO World Heritage Site.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Red_Fort_Delhi.jpg/1280px-Red_Fort_Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6561,\n            "longitude": 77.2309\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "18:00",\n          "activity": "Dinner at Karim\'s",\n          "location": "Karim\'s",\n          "details": "Enjoy a traditional Mughlai meal at Karim\'s, a renowned restaurant in Old Delhi.",\n          "imageUrl": "https://www.holidify.com/images/cmsuploads/2018/06/Karim\'s-Restaurant-Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6525,\n            "longitude": 77.2316\n          },\n          "estimatePricing": "$10"\n        }\n      ]\n    },\n    {\n      "day": 2,\n      "schedule": [\n        {\n          "time": "09:00",\n          "activity": "Explore New Delhi",\n          "location": "India Gate",\n          "details": "Visit the iconic India Gate and enjoy the surrounding park.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/India_Gate%2C_New_Delhi.jpg/1280px-India_Gate%2C_New_Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6130,\n            "longitude": 77.2296\n          },\n          "estimatePricing": "$2"\n        },\n        {\n          "time": "11:00",\n          "activity": "Visit the President\'s House",\n          "location": "Rashtrapati Bhavan",\n          "details": "Admire the architecture of the President\'s House, although you can only view it from outside.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Rashtrapati_Bhavan%2C_New_Delhi.jpg/1280px-Rashtrapati_Bhavan%2C_New_Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6139,\n            "longitude": 77.2285\n          },\n          "estimatePricing": "$2"\n        },\n        {\n          "time": "13:00",\n          "activity": "Lunch at a local eatery",\n          "location": "Connaught Place",\n          "details": "Have lunch at a local eatery in Connaught Place, a popular shopping and dining area.",\n          "imageUrl": "https://www.holidify.com/images/cmsuploads/2021/12/Connaught-Place-Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6324,\n            "longitude": 77.2182\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "15:00",\n          "activity": "Visit the Lotus Temple",\n          "location": "Lotus Temple",\n          "details": "Admire the unique architecture of the Lotus Temple, a Baha\'i House of Worship.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Lotus_Temple%2C_Delhi%2C_India%2C_2013-03-03.jpg/1280px-Lotus_Temple%2C_Delhi%2C_India%2C_2013-03-03.jpg",\n          "geoCoordinates": {\n            "latitude": 28.5532,\n            "longitude": 77.2589\n          },\n          "estimatePricing": "$2"\n        },\n        {\n          "time": "18:00",\n          "activity": "Dinner at a street food stall",\n          "location": "Khan Market",\n          "details": "Enjoy a delicious and affordable dinner at a street food stall in Khan Market.",\n          "imageUrl": "https://www.holidify.com/images/cmsuploads/2019/09/Khan-Market-New-Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6034,\n            "longitude": 77.2239\n          },\n          "estimatePricing": "$5"\n        }\n      ]\n    },\n    {\n      "day": 3,\n      "schedule": [\n        {\n          "time": "09:00",\n          "activity": "Visit the Humayun\'s Tomb",\n          "location": "Humayun\'s Tomb",\n          "details": "Explore the impressive Humayun\'s Tomb, a UNESCO World Heritage Site.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Humayuns_Tomb_Delhi_India_2019.jpg/1280px-Humayuns_Tomb_Delhi_India_2019.jpg",\n          "geoCoordinates": {\n            "latitude": 28.6122,\n            "longitude": 77.2404\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "11:00",\n          "activity": "Visit the Qutub Minar",\n          "location": "Qutub Minar",\n          "details": "Admire the towering Qutub Minar, a UNESCO World Heritage Site, and explore the surrounding complex.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Qutub_Minar_from_south.jpg/1280px-Qutub_Minar_from_south.jpg",\n          "geoCoordinates": {\n            "latitude": 28.5840,\n            "longitude": 77.1748\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "13:00",\n          "activity": "Lunch at a local restaurant",\n          "location": "Mehrauli",\n          "details": "Enjoy lunch at a local restaurant in Mehrauli, a historical area near the Qutub Minar.",\n          "imageUrl": "https://www.holidify.com/images/cmsuploads/2019/02/Mehrauli-Delhi.jpg",\n          "geoCoordinates": {\n            "latitude": 28.5779,\n            "longitude": 77.1751\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "15:00",\n          "activity": "Shopping at Dilli Haat",\n          "location": "Dilli Haat",\n          "details": "Explore Dilli Haat, a cultural market showcasing handicrafts and food from different regions of India.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Dilli_Haat.jpg/1280px-Dilli_Haat.jpg",\n          "geoCoordinates": {\n            "latitude": 28.5700,\n            "longitude": 77.1703\n          },\n          "estimatePricing": "$5"\n        },\n        {\n          "time": "18:00",\n          "activity": "Dinner and departure",\n          "location": "Airport",\n          "details": "Have dinner at a restaurant near the airport and head to the airport for your departure.",\n          "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Indira_Gandhi_International_Airport.jpg/1280px-Indira_Gandhi_International_Airport.jpg",\n          "geoCoordinates": {\n            "latitude": 28.5656,\n            "longitude": 77.1039\n          },\n          "estimatePricing": "$10"\n        }\n      ]\n    }\n  ]\n}\n```',
        },
      ],
    },
  ],
});

//   const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
//   console.log(result.response.text());
